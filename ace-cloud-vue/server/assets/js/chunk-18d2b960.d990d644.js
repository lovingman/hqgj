(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-18d2b960"],{"3cd1":function(t,e,a){"use strict";var i=a("ed78"),r=a.n(i);r.a},6797:function(t,e,a){"use strict";a.d(e,"d",function(){return r}),a.d(e,"e",function(){return s}),a.d(e,"b",function(){return l}),a.d(e,"c",function(){return n}),a.d(e,"a",function(){return o});var i=a("b775");function r(t){return Object(i["a"])({url:"/zcpa-portal/system/getAreaTree",method:"get",params:t})}function s(t){return Object(i["a"])({url:"/zcpa-portal/dict/getByCategoryIds",method:"get",params:{categoryIds:t}})}function l(t,e){var a=new FormData;return a.append("file",t.file),Object(i["a"])({method:"post",url:e,headers:{"Content-Type":"multipart/form-data"},data:a})}function n(t,e){return Object(i["a"])({url:e,method:"get",params:t,responseType:"blob"})}function o(t,e){return Object(i["a"])({url:t,method:"post",data:e,transformRequest:[function(t){var e="";for(var a in t)e+=encodeURIComponent(a)+"="+encodeURIComponent(t[a])+"&";return e}],headers:{"Content-Type":"application/x-www-form-urlencoded"}})}},7514:function(t,e,a){"use strict";var i=a("5ca1"),r=a("0a49")(5),s="find",l=!0;s in[]&&Array(1)[s](function(){l=!1}),i(i.P+i.F*l,"Array",{find:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),a("9c6c")(s)},9436:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table"},[a("div",{staticClass:"container"},[a("div",{staticClass:"handle-box"},[a("el-row",[a("el-col",{attrs:{span:13}},[a("el-cascader",{staticClass:"handle-select mr11",staticStyle:{float:"right",width:"160px"},attrs:{placeholder:"请选择行政区划",options:t.areaCodeOptions,props:t.areaCodeProps,clearable:"","change-on-select":"",filterable:""},model:{value:t.areaCodes,callback:function(e){t.areaCodes=e},expression:"areaCodes"}})],1),a("el-col",{attrs:{span:3}},[a("el-select",{staticClass:"handle-select mr11",staticStyle:{float:"right"},attrs:{clearable:"",placeholder:"项目类型"},model:{value:t.query.projectCategory,callback:function(e){t.$set(t.query,"projectCategory",e)},expression:"query.projectCategory"}},t._l(t.projectTypeArr,function(t){return a("el-option",{key:t.code,attrs:{label:t.name,value:t.code}})}),1)],1),a("el-col",{attrs:{span:3}},[a("el-date-picker",{staticClass:"handle-input mr10",staticStyle:{float:"right"},attrs:{type:"date","picker-options":t.startTime,format:"yyyy-MM-dd","value-format":"yyyy-MM-dd 00:00:00",placeholder:"开始时间"},model:{value:t.query.startTime,callback:function(e){t.$set(t.query,"startTime",e)},expression:"query.startTime"}})],1),a("el-col",{attrs:{span:3}},[a("el-date-picker",{staticClass:"handle-input mr10",staticStyle:{float:"right"},attrs:{type:"date","picker-options":t.endTime,format:"yyyy-MM-dd","value-format":"yyyy-MM-dd 23:59:59",placeholder:"结束时间"},model:{value:t.query.endTime,callback:function(e){t.$set(t.query,"endTime",e)},expression:"query.endTime"}})],1),a("el-col",{attrs:{span:2}},[a("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.search}},[t._v("搜索")])],1)],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"multipleTable",staticClass:"table",attrs:{data:t.list,border:"","max-height":"475"},on:{"selection-change":t.handleSelectionChange,"sort-change":t.handleSort}},[a("el-table-column",{attrs:{type:"index",width:"55",label:"序号",align:"center"}}),a("el-table-column",{attrs:{prop:"projectCategory$",label:"项目类型",sortable:"custom",width:"105"}}),a("el-table-column",{attrs:{prop:"activityTitle","show-overflow-tooltip":!0,label:"活动标题"}}),a("el-table-column",{attrs:{prop:"createUserName",label:"平安志愿者",width:"100"}}),a("el-table-column",{attrs:{prop:"startTime",label:"开始时间",sortable:"custom",width:"163"}}),a("el-table-column",{attrs:{prop:"endTime",label:"结束时间",sortable:"custom",width:"163"}}),a("el-table-column",{attrs:{prop:"volHour",label:"服务时长(h)",align:"right",sortable:"custom",width:"130"}}),a("el-table-column",{attrs:{prop:"activityScore",label:"评分",align:"right",sortable:"custom",width:"80"}}),a("el-table-column",{attrs:{prop:"isNineteen",label:"是否19活动",align:"center",sortable:"custom",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return["1"==e.row.isNineteen?a("div",{attrs:{type:"text"}},[t._v("是")]):t._e(),"0"==e.row.isNineteen?a("div",{attrs:{type:"text"}},[t._v("否")]):t._e()]}}])}),a("el-table-column",{attrs:{prop:"isYc",label:"是否发现异常",align:"center",sortable:"custom",width:"130"},scopedSlots:t._u([{key:"default",fn:function(e){return["y"==e.row.isYc?a("div",{attrs:{type:"text"}},[t._v("是")]):t._e(),"y"!=e.row.isYc?a("div",{attrs:{type:"text"}},[t._v("否")]):t._e()]}}])}),a("el-table-column",{attrs:{prop:"status",label:"状态",sortable:"custom",width:"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return["1"===e.row.status?a("div",{staticClass:"green",attrs:{type:"text"}},[t._v("通过")]):t._e(),"2"===e.row.status?a("div",{staticClass:"red",attrs:{type:"text"}},[t._v("未通过")]):t._e(),"3"===e.row.status?a("div",{staticClass:"orange",attrs:{type:"text"}},[t._v("待审核")]):t._e()]}}])}),a("el-table-column",{attrs:{label:"操作",fixed:"right",width:"100",align:"right","header-align":"center"},scopedSlots:t._u([{key:"default",fn:function(e){return["3"==e.row.status&&t.userBtn["/zcpa/actProjectActivity/updateProjectState"]?a("el-button",{attrs:{type:"text",height:"40"},on:{click:function(a){return t.handleExamine(e.$index,e.row)}}},[t._v(t._s(t.userBtn["/zcpa/actProjectActivity/updateProjectState"])+"\n                        ")]):t._e(),"3"==e.row.status&&t.userBtn["/zcpa/actProjectActivity/updateProjectState"]?a("span",{staticClass:"strightline"},[t._v("|")]):t._e(),a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.handleLook(e.$index,e.row)}}},[t._v("查看")])]}}])})],1),a("el-pagination",{attrs:{"current-page":t.currentPage,"page-size":t.pagesize,background:"",layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),a("el-dialog",{attrs:{title:"审核",visible:t.examineVisible,width:"25%"},on:{"update:visible":function(e){t.examineVisible=e}}},[a("el-form",{ref:"form",attrs:{model:t.updateActivity,"label-width":"100%"}},[a("p",{staticStyle:{"line-height":"50px"}},[t._v("1.本次志愿活动内容是否通过？")]),a("el-radio-group",{staticStyle:{"margin-left":"20px"},model:{value:t.updateActivity.status,callback:function(e){t.$set(t.updateActivity,"status",e)},expression:"updateActivity.status"}},[a("el-radio",{attrs:{label:1},nativeOn:{click:function(e){return e.preventDefault(),t.clickitem1(1)}}},[t._v("通过")]),a("el-radio",{attrs:{label:2},nativeOn:{click:function(e){return e.preventDefault(),t.clickitem1(2)}}},[t._v("不通过")])],1),a("div",[a("p",{staticStyle:{"line-height":"50px"}},[t._v("2.请对本次志愿活动进行评分")]),a("el-radio-group",{staticStyle:{"margin-left":"20px"},attrs:{disabled:"2"==this.updateActivity.status},model:{value:t.updateActivity.activityScore,callback:function(e){t.$set(t.updateActivity,"activityScore",e)},expression:"updateActivity.activityScore"}},[a("el-radio",{attrs:{label:1},nativeOn:{click:function(e){return e.preventDefault(),t.clickitem2(1)}}},[t._v("1")]),a("el-radio",{attrs:{label:2},nativeOn:{click:function(e){return e.preventDefault(),t.clickitem2(2)}}},[t._v("2")]),a("el-radio",{attrs:{label:3},nativeOn:{click:function(e){return e.preventDefault(),t.clickitem2(3)}}},[t._v("3")]),a("el-radio",{attrs:{label:4},nativeOn:{click:function(e){return e.preventDefault(),t.clickitem2(4)}}},[t._v("4")]),a("el-radio",{attrs:{label:5},nativeOn:{click:function(e){return e.preventDefault(),t.clickitem2(5)}}},[t._v("5")])],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.examineVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.saveExamine()}}},[t._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"查看活动详情",visible:t.lookVisible,width:"60%"},on:{"update:visible":function(e){t.lookVisible=e}}},[a("div",{staticClass:"el-dialog-div"},[a("el-form",{attrs:{content:"100%"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"项目名称:"}},[a("span",[t._v(t._s(t.see.projectName))])])],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"项目类型:"}},[a("span",[t._v(t._s(t.see.projectCategory$))])])],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"活动标题:"}},[a("span",[t._v(t._s(t.see.activityTitle))])])],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"提交日期:"}},[a("span",[t._v(t._s(t.see.createDate))])])],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"平安志愿者:"}},[a("span",[t._v(t._s(t.see.createUserName))])])],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"所属社会组织:"}},[a("span",[t._v("未加入社会组织")])])],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"被服务对象:"}},["1"==t.see.projectCategory?a("span",[t._v(t._s(t.see.personName))]):t._e(),"2"==t.see.projectCategory?a("span",[t._v(t._s(t.see.schoolName))]):t._e(),"2"!=t.see.projectCategory&&"1"!=t.see.projectCategory?a("span",[t._v("无")]):t._e()])],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"所属网格:"}},[a("span",[t._v(t._s(t.see.areaName))])])],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"活动开始时间:"}},[a("span",[t._v(t._s(t.see.startTime))])])],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"活动结束时间:"}},[a("span",[t._v(t._s(t.see.endTime))])])],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"是否19活动:"}},["1"==t.see.isNineteen?a("span",[t._v("是")]):t._e(),"0"==t.see.isNineteen?a("span",[t._v("否")]):t._e()])],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"活动积分:"}},[a("span",[t._v(t._s(t.see.activityJiFen))]),null==t.see.activityJiFen?a("span",[t._v("无")]):t._e()])],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"活动时长(h):"}},[a("span",[t._v(t._s(t.see.volHour))])])],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"状态:"}},["1"==t.see.status?a("span",{staticClass:"green"},[t._v("通过")]):t._e(),"2"==t.see.status?a("span",{staticClass:"red"},[t._v("未通过")]):t._e(),"3"==t.see.status?a("span",{staticClass:"orange"},[t._v("待审核")]):t._e()])],1)],1),a("el-form-item",{attrs:{label:"志愿服务描述:"}},[a("span",{staticStyle:{"word-wrap":"break-word","word-break":"break-all"}},[t._v(t._s(t.see.content))])]),a("el-form-item",{attrs:{label:"附件:"}},[a("ul",{staticStyle:{"padding-left":"42px!important"}},[a("li",{staticStyle:{"list-style":"none",display:"inline"}},["video"==t.see.typeDetail?a("video-player",{ref:"videoPlayer",staticClass:"video-player vjs-custom-skin",staticStyle:{width:"70%"},attrs:{playsinline:!0,options:t.playerOptions}}):a("viewer",{attrs:{images:t.see.activitieDetail}},t._l(t.see.activitieDetail,function(t){return a("img",{key:t.fileurl,staticClass:"img",attrs:{src:t.fileurl}})}),0)],1)])]),a("el-row",[a("h4",[t._v("是否有可疑迹象")])]),a("div",["y"==t.see.isYc?a("div",[a("el-form-item",{attrs:{label:"异常描述:"}},[a("span",{staticStyle:{"word-wrap":"break-word","word-break":"break-all"}},[t._v(t._s(t.see.ycDesc))])]),a("el-form-item",{attrs:{label:"异常附件:"}},[a("ul",{staticStyle:{"padding-left":"69px!important"}},[a("li",{staticStyle:{"list-style":"none",display:"inline"}},["video"==t.see.typeAbnormal?a("video-player",{ref:"videoPlayer",staticClass:"video-player vjs-custom-skin",staticStyle:{width:"70%"},attrs:{playsinline:!0,options:t.playerOptions}}):a("viewer",{attrs:{images:t.see.activitieAbnormal}},t._l(t.see.activitieAbnormal,function(t){return a("img",{key:t.fileurl,staticClass:"img",attrs:{src:t.fileurl}})}),0)],1)])])],1):t._e(),"y"!=t.see.isYc?a("div",[a("el-row",[a("h5",{attrs:{align:"center"}},[t._v("未发现可疑迹象")])])],1):t._e()])],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.lookVisible=!1}}},[t._v("关闭")])],1)])],1)},r=[],s=a("bd86"),l=(a("7514"),a("ac4d"),a("8a81"),a("ac6a"),a("7f7f"),a("a481"),a("db72")),n=a("b775");function o(t){return Object(n["a"])({url:"/zcpa/actProjectActivity/page",method:"get",params:t})}function c(t){return Object(n["a"])({url:"/zcpa/actProjectActivity/selectByActivity",method:"get",params:{id:t}})}function u(t){return Object(n["a"])({url:"/zcpa/actProjectActivity/updateProjectState",method:"post",data:t})}var d=a("6797"),p=a("97fa"),m=a("2f62"),y={name:"Dateils",data:function(){var t=this;return{playerOptions:{playbackRates:[.7,1,1.5,2],autoplay:!1,muted:!1,loop:!1,preload:"auto",language:"zh-CN",aspectRatio:"16:9",fluid:!0,sources:[{type:"video/mp4",src:""}],notSupportedMessage:"此视频暂无法播放，请稍后再试",controlBar:{timeDivider:!0,durationDisplay:!0,remainingTimeDisplay:!1,fullscreenToggle:!0}},userDisplay:{areaCode:""},tableData:[],currentPage:1,pagesize:10,total:0,list:[],see:{},projectTypeArr:[],multipleSelection:[],lookVisible:!1,examineVisible:!1,delVisible:!1,loading:!1,areaCodes:[],areaCodeOptions:[],examine:{},areaCodeProps:{value:"id",label:"text"},query:{startTime:"",endTime:"",projectCategory:""},updateActivity:{status:1,activityScore:5},form:{startTime:"",nineteenJiFen:"",orgId:"",personName:"",areaCode:"",isYc:"",endTime:"",content:"",fileURL:""},idx:-1,startTime:{disabledDate:function(e){if(t.query.endTime)return e.getTime()>new Date(t.query.endTime).getTime()}},endTime:{disabledDate:function(e){if(t.query.startTime)return e.getTime()<new Date(t.query.startTime).getTime()}}}},created:function(){this.getinformation(),this.initDictData()},computed:Object(l["a"])({},Object(m["b"])(["dictArrayObj","userBtn"])),methods:Object(s["a"])({getinformation:function(){var t=this;this.loading=!1,Object(p["e"])().then(function(e){1==e.status&&(t.loading=!0,t.userDisplay=e.data,t.areaCodeObj=t.userDisplay.areaCode,t.getData(),t.AreaCodeQuery(t.userDisplay))})},handleSort:function(t,e,a){console.log(t.prop,t.order),null==t.order||null==t.prop?(this.query.sord="",this.query.orderBy=""):(this.query.sord=t.order.substring(0,t.order.length-6),this.query.orderBy=t.prop.replace("$","")),this.getData()},handleQuery:function(){this.currentPage=1,this.getData()},handleSizeChange:function(t){this.pagesize=t,this.getData()},handleCurrentChange:function(t){this.currentPage=t,this.getData()},getData:function(){var t=this;this.query=Object.assign(this.query,{areaCode:this.areaCodeObj,pageNum:this.currentPage,pageSize:this.pagesize,totalRecord:this.total}),this.loading=!0,o(this.query).then(function(e){t.loading=!1,t.list=t.formatDataList(e.rows),t.total=e.total})},formatDataList:function(t){for(var e=this.projectTypeArr,a=0;a<t.length;a++)for(var i=0;i<e.length;i++)t[a].projectCategory==e[i].code&&(t[a].projectCategory$=e[i].name);return t},search:function(){if(this.areaCodeObj="",0==this.areaCodes.length)this.areaCodeObj=this.userDisplay.areaCode;else{var t=!0,e=!1,a=void 0;try{for(var i,r=this.areaCodes[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var s=i.value;this.areaCodeObj=s}}catch(l){e=!0,a=l}finally{try{t||null==r.return||r.return()}finally{if(e)throw a}}}this.handleQuery()},AreaCodeQuery:function(t){var e=this,a=this.userDisplay;Object(d["d"])({pid:a.areaCode,type:1,hasSelf:"true"}).then(function(t){e.areaCodeOptions=t.data})},dictQuery:function(){var t=this;Object(d["e"])("47").then(function(e){t.dict=e.data["47"]})},saveExamine:function(){var t=this;this.examine.status=this.updateActivity.status,this.examine.activityScore=this.updateActivity.activityScore,u(this.examine).then(function(e){1==e.status?(t.$message.success("审核成功"),t.getData()):t.$message({message:e.message,type:"warning"}),t.examineVisible=!1})},handleExamine:function(t,e){this.updateActivity.status=1,this.updateActivity.activityScore=5,this.idx=t,this.examine=e,this.examineVisible=!0},clickitem1:function(t){t===this.updateActivity.status?this.updateActivity.status="":this.updateActivity.status=t},clickitem2:function(t){t===this.updateActivity.activityScore?this.updateActivity.activityScore="":this.updateActivity.activityScore=t},handleLook:function(t,e){var a=this;this.idx=t,this.id=e.id,c(this.id).then(function(t){a.see=t.data,a.see.isNineteen=e.isNineteen,a.see.areaName=e.areaName,a.see.projectCategory$=e.projectCategory$,a.srcType(a.see)}),console.log(this.see),this.lookVisible=!0},srcType:function(t){if(t.activitieDetail.length>0){var e=t.activitieDetail[0].fileurl.lastIndexOf("."),a=t.activitieDetail[0].fileurl.substr(e+1);"mp4"==a||"MP4"==a||"MOV"==a?(t.typeDetail="video",this.playerOptions.sources[0].src=t.activitieDetail[0].fileurl):t.typeDetail=""}if(t.activitieAbnormal.length>0){var i=t.activitieAbnormal[0].fileurl.lastIndexOf("."),r=t.activitieAbnormal[0].fileurl.substr(i+1);"mp4"==r||"MP4"==r||"MOV"==r?(t.typeAbnormal="video",this.playerOptions.sources[0].src=t.activitieAbnormal[0].fileurl):t.typeAbnormal=""}},handleSelectionChange:function(t){this.multipleSelection=t},changeProjectType:function(){},initDictData:function(){this.projectTypeArr=this.dictArrayObj.projectValue,this.projectLevelArr=this.dictArrayObj.ProjectLevelValue,this.peopleValueArr=this.dictArrayObj.peopleValue,this.statusValueArr=this.dictArrayObj.statusValue}},"changeProjectType",function(t){var e={};e=this.projectTypeArr.find(function(e){return e.code==t}),this.addsForm.category=t,this.addsForm.categoryType=e.name})},f=y,v=(a("3cd1"),a("2877")),h=Object(v["a"])(f,i,r,!1,null,"20669df4",null);e["default"]=h.exports},"97fa":function(t,e,a){"use strict";a.d(e,"g",function(){return r}),a.d(e,"h",function(){return s}),a.d(e,"f",function(){return l}),a.d(e,"b",function(){return n}),a.d(e,"c",function(){return o}),a.d(e,"a",function(){return c}),a.d(e,"d",function(){return u}),a.d(e,"e",function(){return d});var i=a("b775");function r(t){return Object(i["a"])({url:"/zcpa/baseVolunteer/page",method:"get",params:t})}function s(t){return Object(i["a"])({url:"/zcpa/baseVolunteer/update",method:"post",data:t})}function l(t){return Object(i["a"])({url:"/zcpa/baseVolunteer/getById",method:"get",params:{id:t}})}function n(t){return Object(i["a"])({url:"/zcpa/baseVolunteer/deleteById",method:"post",params:{id:t}})}function o(t){return Object(i["a"])({url:"/zcpa/baseVolunteer/deleteByIds",method:"post",params:{ids:t}})}function c(t){return Object(i["a"])({url:"/zcpa/baseVolunteer/create",method:"post",data:t})}function u(t){return Object(i["a"])({url:"/zcpa/baseVolunteer/exportXls",method:"get",params:t,responseType:"blob"})}function d(t){return Object(i["a"])({url:"/zcpa/www/reg/getAreaCode",method:"get",params:t})}},ed78:function(t,e,a){}}]);
//# sourceMappingURL=chunk-18d2b960.d990d644.js.map