<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.huacainfo.ace.zcpa.dao.RelationSocialVolunteerDao">
  <resultMap id="BaseResultMap" type="com.huacainfo.ace.zcpa.model.RelationSocialVolunteer">
    <id column="id" jdbcType="VARCHAR" property="id" />
    <result column="volunteerId" jdbcType="VARCHAR" property="volunteerId" />
    <result column="socialOrgId" jdbcType="VARCHAR" property="socialOrgId" />
    <result column="auditStatus" jdbcType="VARCHAR" property="auditStatus" />
    <result column="createDate" jdbcType="TIMESTAMP" property="createDate" />
  </resultMap>
  <sql id="Base_Column_List">
    id, volunteerId, socialOrgId, auditStatus, createDate
  </sql>

  <delete id="deleteByPrimaryKey" parameterType="java.lang.String">
    delete from relation_social_volunteer
    where id = #{id,jdbcType=VARCHAR}
  </delete>
  <insert id="insert" parameterType="com.huacainfo.ace.zcpa.model.RelationSocialVolunteer">
    insert into relation_social_volunteer (id, volunteerId, socialOrgId,
      auditStatus, createDate)
    values (#{id,jdbcType=VARCHAR}, #{volunteerId,jdbcType=VARCHAR}, #{socialOrgId,jdbcType=VARCHAR},
      #{auditStatus,jdbcType=VARCHAR}, #{createDate,jdbcType=TIMESTAMP})
  </insert>

  <update id="updateByPrimaryKey" parameterType="com.huacainfo.ace.zcpa.model.RelationSocialVolunteer">
    update relation_social_volunteer
    set volunteerId = #{volunteerId,jdbcType=VARCHAR},
      socialOrgId = #{socialOrgId,jdbcType=VARCHAR},
      auditStatus = #{auditStatus,jdbcType=VARCHAR},
      createDate = #{createDate,jdbcType=TIMESTAMP}
    where id = #{id,jdbcType=VARCHAR}
  </update>
  <resultMap extends="BaseResultMap" id="VoResultMap" type="com.huacainfo.ace.zcpa.vo.RelationSocialVolunteerVo">
    <result column="orgName" jdbcType="INTEGER" property="orgName" />
    <result column="category" jdbcType="VARCHAR" property="category" />
    <result column="name" jdbcType="VARCHAR" property="name" />
  </resultMap>
  <sql id="Vo_Column_List">
    t.id, t.volunteerId, t.socialOrgId, t.auditStatus, t.createDate
  </sql>
  <sql id="From_Statement">
    FROM relation_social_volunteer t
    LEFT JOIN base_social_org s ON t.socialOrgId=s.id
    LEFT JOIN base_volunteer v ON t.volunteerId =v.id
  </sql>
  <sql id="Where_Condition">
    <where>
      1 = 1
      <if test="condition.volunteerid != null and condition.volunteerid != ''">
         and t.volunteerId = #{condition.volunteerId,jdbcType=VARCHAR}
      </if>
      <if test="condition.socialOrgId != null and condition.socialOrgId != ''">
         and t.socialOrgId = #{condition.socialOrgId,jdbcType=VARCHAR}
      </if>
      <if test="condition.auditstatus != null and condition.auditstatus != ''">
         and t.auditStatus = #{condition.auditStatus,jdbcType=VARCHAR}
      </if>
      <if test="condition.createdate != null and condition.createdate != ''">
         and t.createDate = #{condition.createDate,jdbcType=TIMESTAMP}
      </if>
    </where>
  </sql>
  <select id="selectVoByPrimaryKey" parameterType="java.lang.String" resultMap="VoResultMap">
      select
        <include refid="Vo_Column_List"/>
        <include refid="From_Statement"/>
        where t.id = #{id,jdbcType=VARCHAR}
  </select>
  <select id="findList" parameterType="java.lang.String" resultMap="VoResultMap">
            select
        <include refid="Vo_Column_List"/>,s.orgName,s.category,v.name
        <include refid="From_Statement"/>
        <include refid="Where_Condition"/>
        <choose>
            <when test='orderBy!=null and orderBy!=""'>
                ORDER BY ${orderBy}
            </when>
            <otherwise>
                ORDER BY t.createDate desc
            </otherwise>
        </choose>
    limit #{start,jdbcType=DECIMAL}, #{limit,jdbcType=DECIMAL}
  </select>
  <select id="findCount" resultType="int">
    SELECT COUNT(*)
<include refid="From_Statement"/>
<include refid="Where_Condition"/>
  </select>
  <select id="isExist" parameterType="com.huacainfo.ace.zcpa.model.RelationSocialVolunteer" resultType="int">
            select count(1)
        from relation_social_volunteer
        where id = #{id,jdbcType=VARCHAR}
  </select>
  <delete id="deleteByIds">
     delete from relation_social_volunteer
 where id in
 <foreach collection="ids" item="id" open="(" separator="," close=")">
    #{id}
 </foreach>
  </delete>
</mapper>
